<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Life & Death Calculator</title>
    <style>
        /* Import clean, professional font */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

        /* RESET & BASE STYLES */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            font-family: 'Inter', sans-serif;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #1a202c;
            padding: 20px;
            margin: 0;
            overflow-x: hidden;
        }

        /* MAIN CONTAINER */
        .container {
            background: #ffffff;
            border-radius: 16px;
            width: 100%;
            max-width: 900px;
            min-height: 500px;
            box-shadow:
                0 20px 25px -5px rgba(0, 0, 0, 0.1),
                0 10px 10px -5px rgba(0, 0, 0, 0.04);
            position: relative;
            margin: auto;
            border: 1px solid #e2e8f0;
            display: flex;
            flex-direction: row;
            overflow: hidden;
        }

        .card-inner {
            display: flex;
            width: 100%;
            height: 100%;
            min-height: 500px;
        }

        /* LEFT SIDE - INPUT FORM */
        .left-side {
            flex: 1;
            padding: 40px 30px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: #ffffff;
        }

        /* RIGHT SIDE - IMAGE & RESULTS */
        .right-side {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
            color: white;
            padding: 40px 30px;
            position: relative;
        }

        /* IMAGE STYLES */
        .random-image-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
        }

        .random-image {
            width: 200px;
            height: 200px;
            border-radius: 12px;
            object-fit: cover;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            transition: transform 0.3s ease;
        }

        .random-image:hover {
            transform: scale(1.05);
        }

        .image-caption {
            margin-top: 15px;
            font-size: 14px;
            font-weight: 500;
            color: rgba(255, 255, 255, 0.8);
            text-align: center;
        }

        /* TYPOGRAPHY */
        .title {
            font-family: 'Inter', sans-serif;
            font-size: 28px;
            font-weight: 700;
            margin: 0 0 25px 0;
            color: #1e293b;
            letter-spacing: -0.025em;
            line-height: 1.2;
            text-align: center;
        }

        .result-title {
            font-family: 'Inter', sans-serif;
            font-size: 24px;
            font-weight: 700;
            margin: 0 0 25px 0;
            color: white;
            letter-spacing: -0.025em;
            line-height: 1.2;
            text-align: center;
        }

        .section-title {
            font-family: 'Inter', sans-serif;
            font-size: 16px;
            font-weight: 600;
            margin: 25px 0 20px 0;
            color: #475569;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            text-align: center;
        }

        /* RESULTS CONTAINER */
        .results-container {
            width: 100%;
            display: none;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.6s ease;
        }

        .results-container.show {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }

        /* LIFE SECTIONS */
        .life-section {
            margin-bottom: 25px;
        }

        .life-section h4 {
            font-family: 'Inter', sans-serif;
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 15px;
            color: white;
            letter-spacing: -0.025em;
            text-align: center;
        }

        /* TIME DISPLAY ROWS */
        .time-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 12px 16px;
            margin-bottom: 8px;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }

        .time-row:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateX(2px);
        }

        .time-label {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.8);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 500;
            width: 60px;
            text-align: left;
        }

        .time-value {
            font-size: 18px;
            font-weight: 700;
            color: #ffffff;
            font-family: 'Inter', sans-serif;
            min-width: 40px;
            text-align: right;
            transition: all 0.3s ease;
        }

        /* PROGRESS BAR */
        .progress-section {
            margin-top: 25px;
        }

        .progress-section h4 {
            font-family: 'Inter', sans-serif;
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 15px;
            color: white;
            letter-spacing: -0.025em;
            text-align: center;
        }

        .progress-bar {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            height: 20px;
            margin: 15px 0;
            overflow: hidden;
            position: relative;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .progress-fill {
            background: linear-gradient(135deg, #60a5fa, #a78bfa);
            height: 100%;
            border-radius: 8px;
            transition: width 2s ease;
            position: relative;
            min-width: 0%;
        }

        .progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 12px;
            font-weight: 600;
            color: white;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
            white-space: nowrap;
        }

        /* INPUT STYLES */
        .input-group {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
            margin-bottom: 35px;
        }

        .input-wrapper {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .input-wrapper label {
            font-weight: 600;
            color: #374151;
            font-size: 14px;
            margin-bottom: 8px;
            display: block;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            transition: all 0.3s ease;
            font-family: 'Inter', sans-serif;
            text-align: center;
        }

        input[type="number"] {
            width: 100px;
            height: 50px;
            border-radius: 8px;
            border: 2px solid #e2e8f0;
            background: #ffffff;
            font-size: 16px;
            font-weight: 600;
            text-align: center;
            outline: none;
            font-family: 'Inter', sans-serif;
            color: #1e293b;
            transition: all 0.3s ease;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        input[type="number"]:focus {
            border-color: #4f46e5;
            box-shadow:
                0 0 0 3px rgba(79, 70, 229, 0.1),
                0 1px 3px rgba(0, 0, 0, 0.1);
            transform: translateY(-1px);
        }

        input[type="number"]:hover {
            border-color: #cbd5e1;
            transform: translateY(-1px);
        }

        /* ERROR HANDLING */
        input[type="number"].error {
            border-color: #ef4444;
            animation: shake 0.5s ease-in-out;
            box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1);
        }

        .error-message {
            color: #ef4444;
            font-size: 12px;
            font-weight: 500;
            margin-top: 5px;
            opacity: 0;
            transition: opacity 0.3s ease;
            text-align: center;
            min-height: 16px;
        }

        .error-message.show {
            opacity: 1;
            animation: fadeInUp 0.3s ease;
        }

        /* BUTTON STYLES */
        .btn-calc {
            margin: 25px auto 0 auto;
            padding: 14px 28px;
            border-radius: 8px;
            border: none;
            background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
            color: #fff;
            font-weight: 600;
            font-size: 14px;
            font-family: 'Inter', sans-serif;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow:
                0 4px 6px -1px rgba(0, 0, 0, 0.1),
                0 2px 4px -1px rgba(0, 0, 0, 0.06);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            position: relative;
            overflow: hidden;
        }

        .btn-calc:hover {
            transform: translateY(-2px);
            box-shadow:
                0 10px 15px -3px rgba(0, 0, 0, 0.1),
                0 4px 6px -2px rgba(0, 0, 0, 0.05);
            background: linear-gradient(135deg, #4338ca 0%, #6d28d9 100%);
        }

        .btn-calc:active {
            transform: translateY(0);
        }

        .btn-calc.loading {
            pointer-events: none;
            opacity: 0.7;
            animation: pulse 1s ease-in-out infinite;
        }

        /* ANIMATIONS */
        @keyframes shake {

            0%,
            100% {
                transform: translateX(0);
            }

            25% {
                transform: translateX(-5px);
            }

            75% {
                transform: translateX(5px);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 0.7;
            }

            50% {
                opacity: 1;
            }
        }

        /* RESPONSIVE DESIGN */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            .container {
                max-width: 95vw;
                min-height: 90vh;
                flex-direction: column;
                border-radius: 12px;
            }

            .left-side,
            .right-side {
                padding: 25px 20px;
                flex: none;
            }

            .right-side {
                min-height: 400px;
            }

            .random-image {
                width: 150px;
                height: 150px;
            }

            .title {
                font-size: 24px;
                margin-bottom: 20px;
            }

            .result-title {
                font-size: 20px;
                margin-bottom: 20px;
            }

            .input-group {
                gap: 15px;
                flex-direction: column;
                align-items: center;
                margin-bottom: 25px;
            }

            .input-wrapper {
                width: 100%;
                max-width: 140px;
            }

            input[type="number"] {
                width: 100%;
                height: 45px;
                font-size: 16px;
            }

            .btn-calc {
                padding: 12px 24px;
                font-size: 13px;
                margin-top: 20px;
            }

            .time-row {
                padding: 10px 14px;
                margin-bottom: 6px;
            }

            .time-value {
                font-size: 16px;
            }

            .time-label {
                font-size: 11px;
                width: 55px;
            }

            .life-section {
                margin-bottom: 20px;
            }

            .progress-bar {
                height: 18px;
            }
        }

        @media (max-width: 480px) {
            .container {
                max-width: 98vw;
                min-height: 95vh;
            }

            .left-side,
            .right-side {
                padding: 20px 15px;
            }

            .title {
                font-size: 22px;
            }

            .result-title {
                font-size: 18px;
            }

            .input-group {
                gap: 12px;
            }

            .random-image {
                width: 120px;
                height: 120px;
            }

            .time-row {
                padding: 8px 12px;
            }

            .time-value {
                font-size: 14px;
            }

            .time-label {
                font-size: 10px;
                width: 50px;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="card-inner">
            <!-- LEFT SIDE: INPUT FORM -->
            <div class="left-side">
                <h1 class="title">Life & Death Calculator</h1>

                <h3 class="section-title">Birth Date</h3>
                <div class="input-group">
                    <div class="input-wrapper">
                        <label for="bday">Day</label>
                        <input id="bday" type="number" min="1" max="31" placeholder="DD" required>
                        <div class="error-message" id="bday-error"></div>
                    </div>
                    <div class="input-wrapper">
                        <label for="bmonth">Month</label>
                        <input id="bmonth" type="number" min="1" max="12" placeholder="MM" required>
                        <div class="error-message" id="bmonth-error"></div>
                    </div>
                    <div class="input-wrapper">
                        <label for="byear">Year</label>
                        <input id="byear" type="number" min="1900" max="2100" placeholder="YYYY" required>
                        <div class="error-message" id="byear-error"></div>
                    </div>
                </div>

                <h3 class="section-title">Expected Death Date</h3>
                <div class="input-group">
                    <div class="input-wrapper">
                        <label for="dday">Day</label>
                        <input id="dday" type="number" min="1" max="31" placeholder="DD" required>
                        <div class="error-message" id="dday-error"></div>
                    </div>
                    <div class="input-wrapper">
                        <label for="dmonth">Month</label>
                        <input id="dmonth" type="number" min="1" max="12" placeholder="MM" required>
                        <div class="error-message" id="dmonth-error"></div>
                    </div>
                    <div class="input-wrapper">
                        <label for="dyear">Year</label>
                        <input id="dyear" type="number" min="2025" max="2500" placeholder="YYYY" required>
                        <div class="error-message" id="dyear-error"></div>
                    </div>
                </div>

                <button class="btn-calc" type="button">Calculate Life Journey</button>
            </div>

            <!-- RIGHT SIDE: IMAGE & RESULTS -->
            <div class="right-side">
                <!-- Initial Image Display -->
                <div class="random-image-container" id="imageContainer">
                    <img src="https://i.pinimg.com/736x/a3/90/40/a39040f7604afe51f0d2bf512bd118ca.jpg"
                        alt="Life Journey Illustration" class="random-image" loading="lazy">
                    <p class="image-caption">Your life journey awaits calculation...</p>
                </div>

                <!-- Results Display -->
                <div class="results-container" id="resultsContainer">
                    <h2 class="result-title">Your Life Journey</h2>

                    <!-- Time Lived Section -->
                    <div class="life-section">
                        <h4>‚è≥ You have lived:</h4>
                        <div class="time-row">
                            <span class="time-label">Years</span>
                            <span class="time-value" id="lived-years">0</span>
                        </div>
                        <div class="time-row">
                            <span class="time-label">Months</span>
                            <span class="time-value" id="lived-months">0</span>
                        </div>
                        <div class="time-row">
                            <span class="time-label">Days</span>
                            <span class="time-value" id="lived-days">0</span>
                        </div>
                        <div class="time-row">
                            <span class="time-label">Hours</span>
                            <span class="time-value" id="lived-hours">0</span>
                        </div>
                        <div class="time-row">
                            <span class="time-label">Minutes</span>
                            <span class="time-value" id="lived-minutes">0</span>
                        </div>
                        <div class="time-row">
                            <span class="time-label">Seconds</span>
                            <span class="time-value" id="lived-seconds">0</span>
                        </div>
                    </div>

                    <!-- Time Remaining Section -->
                    <div class="life-section">
                        <h4>‚è∞ Time remaining:</h4>
                        <div class="time-row">
                            <span class="time-label">Years</span>
                            <span class="time-value" id="remaining-years">0</span>
                        </div>
                        <div class="time-row">
                            <span class="time-label">Months</span>
                            <span class="time-value" id="remaining-months">0</span>
                        </div>
                        <div class="time-row">
                            <span class="time-label">Days</span>
                            <span class="time-value" id="remaining-days">0</span>
                        </div>
                        <div class="time-row">
                            <span class="time-label">Hours</span>
                            <span class="time-value" id="remaining-hours">0</span>
                        </div>
                        <div class="time-row">
                            <span class="time-label">Minutes</span>
                            <span class="time-value" id="remaining-minutes">0</span>
                        </div>
                        <div class="time-row">
                            <span class="time-label">Seconds</span>
                            <span class="time-value" id="remaining-seconds">0</span>
                        </div>
                    </div>

                    <!-- Progress Section -->
                    <div class="progress-section">
                        <h4>üìä Life Progress</h4>
                        <div class="progress-bar">
                            <div class="progress-fill" id="progress-fill" style="width: 0%">
                                <span class="progress-text" id="progress-text">0% Complete</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // GLOBAL VARIABLES
        const btnCalc = document.querySelector('.btn-calc');
        const inputs = document.querySelectorAll('input[type="number"]');
        const imageContainer = document.getElementById('imageContainer');
        const resultsContainer = document.getElementById('resultsContainer');
        let updateInterval;

        // UTILITY FUNCTIONS

        /**
         * Shows results section and hides image
         */
        function showResults() {
            if (imageContainer && resultsContainer) {
                imageContainer.style.display = 'none';
                resultsContainer.classList.add('show');
            }
        }

        /**
         * Shows image section and hides results
         */
        function hideResults() {
            if (imageContainer && resultsContainer) {
                imageContainer.style.display = 'flex';
                resultsContainer.classList.remove('show');
                clearInterval(updateInterval);
            }
        }

        /**
         * Enhanced date validation with comprehensive checks
         * @param {number} day - Day of the month
         * @param {number} month - Month (1-12)
         * @param {number} year - Full year
         * @returns {boolean} - True if date is valid
         */
        function isValidDate(day, month, year) {
            // Check for missing values
            if (!day || !month || !year) return false;

            // Basic range checks
            if (day < 1 || day > 31) return false;
            if (month < 1 || month > 12) return false;
            if (year < 1900 || year > 2500) return false;

            // Create date object and validate it exists
            const date = new Date(year, month - 1, day);
            const isValid = date &&
                date.getFullYear() === year &&
                date.getMonth() + 1 === month &&
                date.getDate() === day;

            return isValid;
        }

        /**
         * Displays error message for specific input field
         * @param {string} inputId - ID of the input field
         * @param {string} message - Error message to display
         */
        function showError(inputId, message) {
            const input = document.getElementById(inputId);
            const errorDiv = document.getElementById(inputId + '-error');

            if (input && errorDiv) {
                input.classList.add('error');
                errorDiv.textContent = message;
                errorDiv.classList.add('show');

                // Auto-clear error after 4 seconds
                setTimeout(() => {
                    input.classList.remove('error');
                    errorDiv.classList.remove('show');
                }, 4000);
            }
        }

        /**
         * Clears all error states and messages
         */
        function clearErrors() {
            inputs.forEach(input => {
                input.classList.remove('error');
                const errorDiv = document.getElementById(input.id + '-error');
                if (errorDiv) {
                    errorDiv.classList.remove('show');
                    errorDiv.textContent = '';
                }
            });
        }

        /**
         * Comprehensive input validation
         * @param {number} bday - Birth day
         * @param {number} bmonth - Birth month
         * @param {number} byear - Birth year
         * @param {number} dday - Death day
         * @param {number} dmonth - Death month
         * @param {number} dyear - Death year
         * @returns {boolean} - True if all inputs are valid
         */
        function validateInputs(bday, bmonth, byear, dday, dmonth, dyear) {
            clearErrors();
            let isValid = true;

            // Validate birth date
            if (!isValidDate(bday, bmonth, byear)) {
                showError('bday', 'Invalid birth date');
                isValid = false;
            }

            // Validate death date
            if (!isValidDate(dday, dmonth, dyear)) {
                showError('dday', 'Invalid death date');
                isValid = false;
            }

            if (isValid) {
                const birthDate = new Date(byear, bmonth - 1, bday);
                const deathDate = new Date(dyear, dmonth - 1, dday);
                const now = new Date();

                // Check if birth date is in the future
                if (birthDate > now) {
                    showError('byear', 'Birth date cannot be in the future');
                    isValid = false;
                }

                // Check if death date is before birth date
                if (deathDate <= birthDate) {
                    showError('dyear', 'Death date must be after birth date');
                    isValid = false;
                }

                // Check if death date is too close to birth date (less than 1 year)
                const oneYear = 365 * 24 * 60 * 60 * 1000; // milliseconds in a year
                if (deathDate - birthDate < oneYear) {
                    showError('dyear', 'Life span must be at least 1 year');
                    isValid = false;
                }
            }

            return isValid;
        }

        /**
         * Main calculation function for life statistics
         * @param {number} bday - Birth day
         * @param {number} bmonth - Birth month
         * @param {number} byear - Birth year
         * @param {number} dday - Death day
         * @param {number} dmonth - Death month
         * @param {number} dyear - Death year
         * @returns {Object|null} - Life statistics or null if invalid
         */
        function calcLife(bday, bmonth, byear, dday, dmonth, dyear) {
            if (!validateInputs(bday, bmonth, byear, dday, dmonth, dyear)) {
                return null;
            }

            const birth = new Date(byear, bmonth - 1, bday);
            const death = new Date(dyear, dmonth - 1, dday);
            const now = new Date();

            // Calculate time lived and remaining
            const lived = Math.max(0, now - birth);
            const remaining = Math.max(0, death - now);
            const totalLife = death - birth;

            // Calculate percentage with proper bounds
            let percentageLived = (lived / totalLife) * 100;
            percentageLived = Math.min(100, Math.max(0, percentageLived));
            percentageLived = Math.round(percentageLived * 100) / 100;

            return { lived, remaining, percentageLived, totalLife };
        }

        /**
         * Converts milliseconds to human-readable time units
         * @param {number} ms - Milliseconds to convert
         * @returns {Object} - Object with years, months, days, hr, min, sec
         */
        function formatDuration(ms) {
            // Ensure non-negative value
            ms = Math.max(0, ms);

            let seconds = Math.floor(ms / 1000);
            let minutes = Math.floor(seconds / 60);
            let hours = Math.floor(minutes / 60);
            let days = Math.floor(hours / 24);
            let years = Math.floor(days / 365);
            let months = Math.floor((days % 365) / 30);

            // Calculate remainders
            days = days % 30;
            hours = hours % 24;
            minutes = minutes % 60;
            seconds = seconds % 60;

            return {
                years: Math.max(0, years),
                months: Math.max(0, months),
                days: Math.max(0, days),
                hr: Math.max(0, hours),
                min: Math.max(0, minutes),
                sec: Math.max(0, seconds)
            };
        }

        /**
         * Updates the display with calculation results
         * @param {Object} life - Life calculation results
         */
        function showResult(life) {
            if (!life) {
                alert('Please enter valid dates!');
                return;
            }

            const lived = formatDuration(life.lived);
            const remaining = formatDuration(life.remaining);

            // Update lived time elements with safe assignment
            const livedElements = {
                'lived-years': lived.years,
                'lived-months': lived.months,
                'lived-days': lived.days,
                'lived-hours': lived.hr,
                'lived-minutes': lived.min,
                'lived-seconds': lived.sec
            };

            Object.entries(livedElements).forEach(([id, value]) => {
                const element = document.getElementById(id);
                if (element) element.textContent = value;
            });

            // Update remaining time elements with safe assignment
            const remainingElements = {
                'remaining-years': remaining.years,
                'remaining-months': remaining.months,
                'remaining-days': remaining.days,
                'remaining-hours': remaining.hr,
                'remaining-minutes': remaining.min,
                'remaining-seconds': remaining.sec
            };

            Object.entries(remainingElements).forEach(([id, value]) => {
                const element = document.getElementById(id);
                if (element) element.textContent = value;
            });

            // Update progress bar with safe assignment
            const progressFill = document.getElementById('progress-fill');
            const progressText = document.getElementById('progress-text');

            if (progressFill && progressText) {
                progressFill.style.width = life.percentageLived + '%';
                progressText.textContent = life.percentageLived + '% Complete';
            }

            showResults();
            startLiveUpdate();
        }

        /**
         * Starts the live update interval for real-time seconds counting
         */
        function startLiveUpdate() {
            clearInterval(updateInterval);

            updateInterval = setInterval(() => {
                try {
                    const bday = parseInt(document.getElementById('bday').value);
                    const bmonth = parseInt(document.getElementById('bmonth').value);
                    const byear = parseInt(document.getElementById('byear').value);
                    const dday = parseInt(document.getElementById('dday').value);
                    const dmonth = parseInt(document.getElementById('dmonth').value);
                    const dyear = parseInt(document.getElementById('dyear').value);

                    // Only update if all values are present
                    if (bday && bmonth && byear && dday && dmonth && dyear) {
                        const life = calcLife(bday, bmonth, byear, dday, dmonth, dyear);

                        if (life) {
                            const lived = formatDuration(life.lived);
                            const remaining = formatDuration(life.remaining);

                            // Update only numeric values to avoid flickering
                            const updates = [
                                ['lived-years', lived.years],
                                ['lived-months', lived.months],
                                ['lived-days', lived.days],
                                ['lived-hours', lived.hr],
                                ['lived-minutes', lived.min],
                                ['lived-seconds', lived.sec],
                                ['remaining-years', remaining.years],
                                ['remaining-months', remaining.months],
                                ['remaining-days', remaining.days],
                                ['remaining-hours', remaining.hr],
                                ['remaining-minutes', remaining.min],
                                ['remaining-seconds', remaining.sec]
                            ];

                            updates.forEach(([id, value]) => {
                                const element = document.getElementById(id);
                                if (element && element.textContent !== value.toString()) {
                                    element.textContent = value;
                                    // Add brief highlight effect for seconds
                                    if (id.includes('seconds')) {
                                        element.style.color = '#60a5fa';
                                        setTimeout(() => element.style.color = '#ffffff', 200);
                                    }
                                }
                            });

                            // Update progress bar
                            const progressFill = document.getElementById('progress-fill');
                            const progressText = document.getElementById('progress-text');

                            if (progressFill && progressText) {
                                progressFill.style.width = life.percentageLived + '%';
                                progressText.textContent = life.percentageLived + '% Complete';
                            }
                        }
                    }
                } catch (error) {
                    console.error('Error in live update:', error);
                    clearInterval(updateInterval);
                }
            }, 1000);
        }

        // EVENT LISTENERS

        /**
         * Main calculation button click handler
         */
        if (btnCalc) {
            btnCalc.addEventListener('click', () => {
                btnCalc.classList.add('loading');
                btnCalc.textContent = 'Calculating...';

                setTimeout(() => {
                    try {
                        const bday = parseInt(document.getElementById('bday').value);
                        const bmonth = parseInt(document.getElementById('bmonth').value);
                        const byear = parseInt(document.getElementById('byear').value);
                        const dday = parseInt(document.getElementById('dday').value);
                        const dmonth = parseInt(document.getElementById('dmonth').value);
                        const dyear = parseInt(document.getElementById('dyear').value);

                        const life = calcLife(bday, bmonth, byear, dday, dmonth, dyear);
                        showResult(life);
                    } catch (error) {
                        console.error('Calculation error:', error);
                        alert('An error occurred during calculation. Please check your inputs.');
                    } finally {
                        btnCalc.classList.remove('loading');
                        btnCalc.textContent = 'Calculate Life Journey';
                    }
                }, 500);
            });
        }

        /**
         * Input field event listeners
         */
        inputs.forEach(input => {
            // Enter key support
            input.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    if (btnCalc) btnCalc.click();
                }
            });

            // Clear errors on input
            input.addEventListener('input', () => {
                input.classList.remove('error');
                const errorDiv = document.getElementById(input.id + '-error');
                if (errorDiv) {
                    errorDiv.classList.remove('show');
                }
            });

            // Auto-format input values
            input.addEventListener('blur', () => {
                const value = parseInt(input.value);
                if (!isNaN(value)) {
                    // Auto-pad day and month with leading zeros
                    if ((input.id.includes('day') || input.id.includes('month')) && value < 10) {
                        input.value = '0' + value;
                    }
                }
            });
        });

        /**
         * Auto-calculation with debouncing
         */
        let autoCalcTimeout;
        inputs.forEach(input => {
            input.addEventListener('input', () => {
                clearTimeout(autoCalcTimeout);
                autoCalcTimeout = setTimeout(() => {
                    // Only auto-calculate if all fields have values
                    if (Array.from(inputs).every(inp => inp.value.trim() !== '')) {
                        if (btnCalc) btnCalc.click();
                    }
                }, 2000);
            });
        });

        /**
         * Cleanup on page unload
         */
        window.addEventListener('beforeunload', () => {
            clearInterval(updateInterval);
        });

        /**
         * Handle page visibility changes to pause/resume updates
         */
        document.addEventListener('visibilitychange', () => {
            if (document.hidden) {
                clearInterval(updateInterval);
            } else if (resultsContainer && resultsContainer.classList.contains('show')) {
                startLiveUpdate();
            }
        });

        // INITIALIZATION
        console.log('Life & Death Calculator initialized successfully');
    </script>
</body>

</html>